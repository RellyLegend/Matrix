"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.rolesUpdated = void 0;
const collection_1 = require("@discordjs/collection");
/**
 * Handle the teamRolesUpdated event.
 * @param client The client the Websocket belongs to.
 * @param data The data of the event.
 */
async function rolesUpdated(client, data) {
    const server = await client.servers.fetch(data.serverId);
    const oldMembers = new collection_1.Collection();
    const newMembers = new collection_1.Collection();
    for (const { roleIds, userId } of data.memberRoleIds) {
        const oldMember = server.members.cache.get(userId);
        const newMember = await server.members.fetch(userId);
        newMember.roleIds = roleIds || [];
        if (oldMember)
            oldMembers.set(userId, oldMember);
        newMembers.set(userId, newMember);
    }
    client.emit('rolesEdit', newMembers, oldMembers);
}
exports.rolesUpdated = rolesUpdated;
//# sourceMappingURL=server.js.map